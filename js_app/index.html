<!DOCTYPE html>
<html>
<head>
  <title>Stroke Prediction</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width" />
  <link rel="stylesheet" href="app.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body id="body">
  <h1>Stroke Prediction K-Nearest Neighbors Model</h1>
  <p>This is a demonstration for a machine learning model that will give a probability of having a stroke.</p>
  <h4>Information about the model and application</h4>
  <ul>
    <li>
      The model built using sklearn's KNN module and uses the default settings.  The source code for how the model was trained and constructed can be found <a href="https://github.com/ckeisato/stroke">here</a>.
    </li>
    <li>
      The model is trained on dataset of 5,110 records, of those 4,861 were from patients who never had a stroke and 249 were from those who experienced a stroke.
        <ul>
          <li>
            The module was trained with 10/90 test train split.
          </li>
          <li>n = 5, model was initialized with weights=distance</li>
          <li>
            The model had an accuracy of ~93% with the test data.
          </li>
          <li>
            The model takes the following attributes
            <ol>
              <li>Gender</li>
              <li>Age</li>
              <li>Hypertension diagnosis</li>
              <li>Heart disease diagnosis</li>
              <li>Glucose level</li>
              <li>Body mass index (BMI)</li>
              <li>Smoking habits</li>
              <li>Ever married</li>
              <li>Work type</li>
              <li>Residence type</li>
            </ol>
        </ul>
    </li>
    <li>
      The model is run on a Google Cloud function.
    </li>
    <li>
      The request can take up to 10 seconds to complete, so please be patient.
    </li>
  </ul>
  <div class="demo" id="demo">
    <h4>Try it out here</h4>
    <div id="missing-value">Missing values!</div>
    <div class="demo-input">
      <div class="demo-input-left">
        <div class="input-container">
          <label for="gender">Gender:</label>
          <select name="gender" id="gender">
            <option value="Male">Male</option>
            <option value="Female">Female</option>
            <option value="Other">Other</option>
          </select>
        </div>
        <div class="input-container">
          <label for="age">Age:</label>
          <input type="age" id="age" name="age">
        </div>
        <div class="input-container">
          <label for="hypertension">Hypertension:</label>
          <select name="hypertension" id="hypertension">
            <option value="0">Negative Hypertension diagnosis</option>
            <option value="1">Positive hypertension diagnosis</option>
          </select>
        </div>
        <div class="input-container">
          <label for="heart-disease">Heart disease:</label>
          <select name="heart-disease" id="heart-disease">
            <option value="0">Negative heart disease diagnosis</option>
            <option value="1">Positive heart disease diagnosis</option>
          </select>
        </div>
        <div class="input-container">
          <label for="glucose">Average glucose level in blood:</label>
          <input type="glucose" id="glucose" name="glucose" placeholder="See below for avg levels">
        </div>
      </div>
      <div class="demo-input-right">

        <div class="input-container">
          <label for="bmi">Body mass index:</label>
          <input type="bmi" id="bmi" name="bmi">
        </div>

        <div class="input-container">
          <label for="smoking">Smoking status:</label>
          <select name="smoking" id="smoking">
            <option value="formerly smoked">Formerly smoked</option>
            <option value="never smoked">Never smoked</option>
            <option value="smokes">Smokes</option>
          </select>
        </div>

        <div class="input-container">
          <label for="married">Ever Married:</label>
          <select name="married" id="married">
            <option value="No">No</option>
            <option value="Yes">Yes</option>
          </select>
        </div>
        <div class="input-container">
          <label for="work-type">Work Type:</label>
          <select name="work-type" id="work-type">
            <option value="children">Children</option>
            <option value="Govt_job">Government Job</option>
            <option value="Never_worked">Never worked</option>
            <option value="Private">Private</option>
            <option value="Self-employed">Self Employed</option>
          </select>
        </div>

        <div class="input-container">
          <label for="residence-type">Residence type:</label>
          <select name="residence-type" id="residence-type">
            <option value="Rural">Rural</option>
            <option value="Urban">Urban</option>
          </select>
        </div>
      </div>
      <p class="note">* For a person without diabetes, a normal glucose level is 70-130 mg/dL.  In this dataset, the average glucose value was 106.</p>
    </div>
    <div class="cta">
      <button type="button" id="analyze-cta" class="button">Evaluate Data</button>
      <button type="button" id="reset-cta" class="button">Reset</button>
    </div>
    <div class="demo-result">
      <div class="loading-indicator">
        <h4>Loading...</h4>
        <div id="seconds-counter"></div>
      </div>
      <div class="result">
        <h4>Result:</h4>
        <p>Probability of this record being associated with <strong>having a stroke</strong>: <span class="result-positive"></span></p>
        <p>Probability of this record being associated with <strong>not having a stroke</strong>: <span class="result-negative"></span></p>
      </div>
    </div>
  </div>
</body>
<footer>
  <h5>Acknowledgements</h5>
  <p>Disclaimer: This is not from a medical professional, this is just a demo for an ML model.</p>
  <p>Credit: Data was taken from here <a href="https://www.kaggle.com/fedesoriano/stroke-prediction-dataset">https://www.kaggle.com/fedesoriano/stroke-prediction-dataset</a></p>
  <p>Author of the dataset: <a href="https://www.kaggle.com/fedesoriano">https://www.kaggle.com/fedesoriano</a></p>
</footer>
<script src="app.js"></script>
</html>
